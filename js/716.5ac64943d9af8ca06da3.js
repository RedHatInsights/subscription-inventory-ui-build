"use strict";(self.webpackChunksubscription_inventory=self.webpackChunksubscription_inventory||[]).push([[716],{2086:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var r=n(3666),a=n(4748),c=n(9376),u=n(9173),l=n(2950),o=n.n(l),i=n(2012),s=n(228),m=n(8767),f=n(237),p=n(7255),d=function(e){var t=(0,p.dQ)();return(0,m.useQuery)({queryKey:"singleProduct.".concat(e),queryFn:function(){return function(e){return function(t){return n=void 0,r=void 0,c=function(){var n,r,a,c,u,l;return function(e,t){var n,r,a,c,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function l(l){return function(o){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,l[0]&&(u=0)),u;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return u.label++,{value:l[1],done:!1};case 5:u.label++,r=l[1],l=[0];continue;case 7:l=u.ops.pop(),u.trys.pop();continue;default:if(!((a=(a=u.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){u=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){u.label=l[1];break}if(6===l[0]&&u.label<a[1]){u.label=a[1],a=l;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(l);break}a[2]&&u.ops.pop(),u.trys.pop();continue}l=t.call(e,u)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,o])}}}(this,(function(o){switch(o.label){case 0:return r=fetch,a=["/api/rhsm/v2/products/".concat(t)],u={},l={},c="Bearer ".concat,[4,e];case 1:return[4,r.apply(void 0,a.concat([(u.headers=(l.Authorization=c.apply("Bearer ",[o.sent()]),l),u)]))];case 2:if(!(n=o.sent()).ok)throw new f.o("Status Code ".concat(n.status,".  Error fetching sku: ").concat(n.statusText,"."),n.status,n.statusText);return[4,n.json()];case 3:return[2,o.sent().body]}}))},new((a=Promise)||(a=Promise))((function(e,t){function u(e){try{o(c.next(e))}catch(e){t(e)}}function l(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(u,l)}o((c=c.apply(n,r||[])).next())}));var n,r,a,c}}(t)(e)},retry:function(e,t){return e<3&&404!=t.status}})},b=n(5984),y=n(5913);const E=function(){var e=(0,i.useNavigate)();return o().createElement(r.EmptyState,{variant:r.EmptyStateVariant.large},o().createElement(r.EmptyStateIcon,{icon:y.R0,color:"grey"}),o().createElement(r.Title,{headingLevel:"h5",size:"lg"},"Your organization currently has no subscriptions for this product"),o().createElement(r.EmptyStateBody,null,"Return to your subscription inventory to view the products to which your organization is subscribed."),o().createElement(r.Button,{variant:"primary",onClick:function(){e("/")}},"Return to Subscriptions Inventory"))};var v=n(6642),h=n(6486),g=function(e){var t=e.getUTCMonth()+1,n=e.getUTCDate();return"".concat(e.getUTCFullYear(),"-").concat(t<10?"0".concat(t):t,"-").concat(n<10?"0".concat(n):n)},w=function(e){return""==e?-1:(0,h.parseInt)(e)},S=function(e){return""==e?new Date(0):new Date(e)};const T=function(e){var t,n=e.subscriptions,a=n.map((function(e){return{contractNumber:w(e.contractNumber),startDate:S(e.startDate),endDate:S(e.endDate),quantity:w(e.quantity)}})),c=o().useState(1),u=c[0],l=c[1],i=o().useState(10),m=i[0],f=i[1],p=o().useState(0),d=p[0],b=p[1],y=o().useState("asc"),E=y[0],h=y[1],T=o().useState(""),N=T[0],C=T[1],D="Contract number",I="Subscription quantity",P="Start date",F="End date",L=function(e){return{sortBy:{index:d,direction:E,defaultDirection:"asc"},onSort:function(e,t,n){b(t),h(n)},columnIndex:e}},k=function(e,t){var n=["contractNumber","quantity","startDate","endDate"];return e.sort((function(e,r){var a=0,c=e[n[t]],u=r[n[t]];return c<u?a=-1:c>u&&(a=1),"asc"==E?a:-1*a}))}(a,d),x=function(e,t){return t=t.trim(),e.filter((function(e){return(-1!=e.contractNumber?e.contractNumber.toString():"Not Available").includes(t)}))}(k,N),q=function(e){var t=(u-1)*m,n=t+m;return e.slice(t,n)}(x);return o().createElement(o().Fragment,null,o().createElement(r.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},o().createElement(r.FlexItem,null,a.length>0&&o().createElement(r.SearchInput,{placeholder:"Filter by contract number",value:N,onChange:function(e,t){return C(t)},onClear:function(){return C("")}})),o().createElement(r.FlexItem,{align:{default:"alignRight"}},(void 0===t&&(t=r.PaginationVariant.top),o().createElement(r.Pagination,{itemCount:n.length,perPage:m,page:u,onSetPage:function(e,t){l(t)},onPerPageSelect:function(e,t){f(t),l(1)},variant:t})))),o().createElement(v.TableComposable,{"aria-label":"subscriptions",variant:"compact"},o().createElement(v.Thead,null,o().createElement(v.Tr,null,o().createElement(v.Th,{sort:L(0),width:20},D),o().createElement(v.Th,{sort:L(1),width:25},I),o().createElement(v.Th,{sort:L(2),width:15},P),o().createElement(v.Th,{sort:L(3),width:15},F))),o().createElement(v.Tbody,null,q.map((function(e,t){return o().createElement(o().Fragment,{key:t},o().createElement(v.Tr,null,o().createElement(v.Td,{dataLabel:D},-1==e.contractNumber?"Not Available":e.contractNumber),o().createElement(v.Td,{dataLabel:I},-1==e.quantity?"Not Available":e.quantity),o().createElement(v.Td,{dataLabel:P},e.startDate==new Date(0)?"Not Available":g(e.startDate)),o().createElement(v.Td,{dataLabel:F},e.endDate==new Date(0)?"Not Available":g(e.endDate))))})))),0==q.length&&o().createElement(s.q,{clearFilters:function(){C("")}}))};var N=n(7085);const C=function(){var e,t,n=(0,i.useParams)().SKU,f=(0,m.useQueryClient)().getQueryData("user"),p=d(n),y=p.isLoading,v=p.error,h=p.data,g=("subscriptionInventory.detailsTable",e=(0,N.useFlagsStatus)().flagsReady,t=(0,N.useFlag)("subscriptionInventory.detailsTable"),!!e&&t),w="Not Available",S=(0,i.useNavigate)();return(0,l.useEffect)((function(){f.canReadProducts||S("/no-permissions")}),[f.canReadProducts]),o().createElement((function(){var e;return o().createElement(o().Fragment,null,o().createElement(c.Z,null,y&&!v&&o().createElement(s.$,null),!y&&!v&&o().createElement(o().Fragment,null,o().createElement(r.Breadcrumb,null,o().createElement(r.BreadcrumbItem,{render:function(){return o().createElement(i.Link,{to:"../"},"Subscriptions Inventory")}}),o().createElement(r.BreadcrumbItem,{isActive:!0},h.name," ")),o().createElement(u.Z,{title:h.name}),o().createElement(r.List,{isPlain:!0},o().createElement(r.ListItem,{className:"pf-u-mt-md"},o().createElement("b",null,"SKU: "),h.sku||w),o().createElement(r.ListItem,{className:"pf-u-mt-0"},o().createElement("b",null,"Quantity: "),null!==(e=h.quantity)&&void 0!==e?e:w),o().createElement(r.ListItem,{className:"pf-u-mt-0"},o().createElement("b",null,"Support level: "),h.serviceLevel||w),o().createElement(r.ListItem,{className:"pf-u-mt-0"},o().createElement("b",null,"Support type: "),h.serviceType||w),o().createElement(r.ListItem,{className:"pf-u-mt-0"},o().createElement("b",null,"Capacity: "),h.capacity?o().createElement(o().Fragment,null,h.capacity.name," ",o().createElement(r.Badge,{isRead:!0},h.capacity.quantity)):o().createElement(o().Fragment,null,"Not Available"))))),g&&!v&&o().createElement(a.ZP,null,o().createElement(r.PageSection,{variant:"light"},o().createElement(r.Title,{headingLevel:"h2"},"Subscription details"),y&&!v&&o().createElement(s.$,null),!y&&!v&&o().createElement(T,{subscriptions:null==h?void 0:h.subscriptions}))),v&&404==v.status&&o().createElement(E,null),v&&404!=v.status&&o().createElement(b.Z,null))}),null)}},237:(e,t,n)=>{n.d(t,{o:()=>c});var r,a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.status=n,a.statusText=r,a}return a(t,e),t}(Error)}}]);
//# sourceMappingURL=../sourcemaps/716.8ef0229b1b3d3e8f5cdaa5cadf1d7162.js.map