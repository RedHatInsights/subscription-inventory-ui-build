"use strict";(self.webpackChunksubscription_inventory=self.webpackChunksubscription_inventory||[]).push([[616],{308:(e,n,t)=>{t.d(n,{Z:()=>I});var r=t(2950),i=t.n(r),o=t(334),a=t(3476),c=t(3212);const l=function(){return i().createElement(c.Bullseye,null,i().createElement(c.Spinner,null))};var u=t(8767),s=t(167),f=t(6808),d=t.n(f);const m={rhsmAPIBase:"https://api.access.qa.redhat.com"};var v=function(){return(v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};const h={ci:v({},m),qa:v({},m),stage:v(v({},m),{rhsmAPIBase:"https://api.access.stage.redhat.com"}),prod:v(v({},m),{rhsmAPIBase:"https://api.access.redhat.com"})};var p=function(){try{return window.insights.chrome.auth.getUser()}catch(e){throw new Error("Error authenticating user: "+e.message)}};const y=function(e){var n,t,a=e.children,c=(0,u.useQueryClient)(),f=(0,o.useLocation)(),m=(0,u.useQuery)("user",(function(){return Promise.all([p(),(r=d().get("cs_jwt"),i=(t=(null===(n=null===(e=null===window||void 0===window?void 0:window.insights)||void 0===e?void 0:e.chrome)||void 0===n?void 0:n.getEnvironment())||"ci",h[t]).rhsmAPIBase,fetch(i+"/management/v1/organization",{headers:{Authorization:"Bearer "+r},mode:"cors"}).then((function(e){return e.json()})))]).then((function(e){var n=e[0],t=e[1];return{accountNumber:n.identity.account_number,isOrgAdmin:!0===n.identity.user.is_org_admin,isSCACapable:!0===t.body.simpleContentAccessCapable}}));var e,n,t,r,i})),v=m.isLoading,y=m.isFetching,g=m.isSuccess,E=m.isError;return(0,r.useEffect)((function(){c.invalidateQueries("user")}),[f.pathname]),g&&(null===(t=null===(n=window.insights)||void 0===n?void 0:n.chrome)||void 0===t||t.hideGlobalFilter()),!0===E?i().createElement(s.Z,null):!0===v||!0===y?i().createElement(l,null):!0===g?i().createElement(i().Fragment,null,a):void 0};var g=(0,r.lazy)((function(){return Promise.all([t.e(252),t.e(736),t.e(163)]).then(t.bind(t,2163))})),E=(0,r.lazy)((function(){return Promise.all([t.e(252),t.e(736),t.e(810)]).then(t.bind(t,2810))})),w=(0,r.lazy)((function(){return Promise.all([t.e(410),t.e(252),t.e(736),t.e(915)]).then(t.bind(t,3915))})),k=function(){return i().createElement("div",{className:"inventory"},i().createElement(r.Suspense,{fallback:i().createElement(l,null)},i().createElement(y,null,i().createElement(o.Switch,null,i().createElement(o.Route,{exact:!0,path:"/",component:g}),i().createElement(o.Route,{path:"/oops",component:E}),i().createElement(o.Route,{path:"/no-permissions",component:w}),i().createElement(o.Route,null,i().createElement(o.Redirect,{to:"/oops"}))))))},b=t(8061),A=t(4586),L=function(){return(L=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},N=function(e,n){for(var t=0,r=n.length,i=e.length;t<r;t++,i++)e[i]=n[t];return e},O=i().createContext({notifications:[],addNotification:function(e,n,t){return null},removeNotification:function(e){return null}}),P=function(e){var n=e.children,t=(0,r.useState)([]),o=t[0],a=t[1],l={notifications:o,addNotification:function(e,n,t){return function(e,n,t){var r=function(e,n,t){var r,o={variant:e,message:n,key:(0,A.Z)(),timeout:null===(r=null==t?void 0:t.hasTimeout)||void 0===r||r};if((null==t?void 0:t.alertLinkText)&&(null==t?void 0:t.alertLinkHref)){var a=(null==t?void 0:t.alertLinkIsDownload)?{download:""}:{},l=i().createElement(i().Fragment,null,i().createElement(c.AlertActionLink,null,i().createElement("a",L({href:t.alertLinkHref},a),t.alertLinkText)));o.actionLinks=l}return(null==t?void 0:t.alertLinkIsDownload)&&(null==t?void 0:t.alertLinkHref)&&(o.downloadHref=t.alertLinkHref),o}(e,n,t),l=N(N([],o),[L({},r)]);return(null==t?void 0:t.keyOfAlertToReplace)&&(l=l.filter((function(e){return e.key!==t.keyOfAlertToReplace}))),a(l),r.key}(e,n,t)},removeNotification:function(e){return function(e){a(o.filter((function(n){return n.key!==e})))}(e)}};return i().createElement(O.Provider,{value:l},n)};const C=function(){var e=function(){var e=(0,r.useContext)(O),n=e.notifications,t=e.addNotification;return{notifications:n,addSuccessNotification:function(e,n){return t("success",e,n)},addErrorNotification:function(e,n){return t("danger",e,n)},addInfoNotification:function(e,n){return t("info",e,n)},removeNotification:e.removeNotification}}(),n=e.notifications,t=e.removeNotification;return i().createElement(c.AlertGroup,{isToast:!0},n.map((function(e,n){return i().createElement(c.Alert,{isLiveRegion:!0,timeout:e.timeout,title:e.message,variant:e.variant,key:e.key,actionLinks:e.actionLinks,actionClose:i().createElement(c.AlertActionCloseButton,{"data-testid":"notification-close-btn-"+n,title:e.message,variantLabel:e.variant+" alert",onClose:function(){t(e.key),(null==e?void 0:e.downloadHref)&&window.URL.revokeObjectURL(e.downloadHref)}})})})))};var R=new b.S({defaultOptions:{queries:{retry:3,retryDelay:1e4,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}}});const I=(0,o.withRouter)((0,a.connect)()((function(){var e=(0,o.useHistory)();return(0,r.useEffect)((function(){insights.chrome.init(),insights.chrome.identifyApp("subscriptionInventory");var n=insights.chrome.on("APP_NAVIGATION",(function(n){var t=n.domEvent.href.replace(/^\/insights\/subscriptions\/inventory\/?/,"/");e.push(t)}));return function(){n()}}),[]),i().createElement(u.QueryClientProvider,{client:R},i().createElement(P,null,i().createElement(C,null),i().createElement(k,null)))})))},319:(e,n,t)=>{t.d(n,{S1:()=>a});var r=t(8738),i=t(8573),o=t.n(i);function a(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,r.JH)({},[o()].concat(n))}}}]);
//# sourceMappingURL=../sourcemaps/616.e6e86c18ec280b3283be.js.map