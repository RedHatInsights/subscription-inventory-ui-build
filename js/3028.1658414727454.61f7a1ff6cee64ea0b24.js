"use strict";(self.webpackChunksubscription_inventory=self.webpackChunksubscription_inventory||[]).push([[3028],{7345:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(8071),a=n(4748),l=n(123),u=n(9173),c=n(2950),i=n.n(c),o=n(334),s=n(5586),m=n(8767),b=function(e,t,n,r){return new(n||(n=Promise))((function(a,l){function u(e){try{i(r.next(e))}catch(e){l(e)}}function c(e){try{i(r.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}i((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,a,l,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return u.label++,{value:l[1],done:!1};case 5:u.label++,r=l[1],l=[0];continue;case 7:l=u.ops.pop(),u.trys.pop();continue;default:if(!((a=(a=u.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){u=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){u.label=l[1];break}if(6===l[0]&&u.label<a[1]){u.label=a[1],a=l;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(l);break}a[2]&&u.ops.pop(),u.trys.pop();continue}l=t.call(e,u)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},f=function(e){return b(void 0,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return[4,window.insights.chrome.auth.getToken()];case 1:return t=n.sent(),[4,fetch("/api/rhsm/v2/products/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})];case 2:return[4,n.sent().json()];case 3:return[2,n.sent().body]}}))}))},p=n(5984),E=n(3193),v=n(6486),h=function(e){var t=e.getMonth()+1;return"".concat(e.getFullYear(),"-").concat(t<10?"0".concat(t):t,"-").concat(e.getDate())},y=function(e){return""==e?-1:(0,v.parseInt)(e)},g=function(e){return""==e?new Date(0):new Date(e)};const w=function(e){var t,n=e.subscriptions,a=n.map((function(e){return{number:y(e.number),contractNumber:y(e.contractNumber),startDate:g(e.startDate),endDate:g(e.endDate),quantity:y(e.quantity)}})),l=i().useState(1),u=l[0],c=l[1],o=i().useState(10),s=o[0],m=o[1],b=i().useState(0),d=b[0],f=b[1],p=i().useState("asc"),v=p[0],w=p[1],S=i().useState(""),N=S[0],T=S[1],D="Subscription number",I="Contract number",L="Subscription quantity",F="Start date",k="End date",P=function(e){return{sortBy:{index:d,direction:v,defaultDirection:"asc"},onSort:function(e,t,n){f(t),w(n)},columnIndex:e}},A=function(e,t){var n=["number","contractNumber","quantity","startDate","endDate"];return e.sort((function(e,r){var a=0,l=e[n[t]],u=r[n[t]];return l<u?a=-1:l>u&&(a=1),"asc"==v?a:-1*a}))}(a,d),q=function(e,t){return t=t.trim(),e.filter((function(e){var n=-1!=e.number?e.number.toString():"Not Available",r=-1!=e.contractNumber?e.contractNumber.toString():"Not Available";return n.includes(t)||r.includes(t)}))}(A,N),x=function(e){var t=(u-1)*s,n=t+s;return e.slice(t,n)}(q);return i().createElement(i().Fragment,null,i().createElement(r.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},i().createElement(r.FlexItem,null,a.length>0&&i().createElement(r.SearchInput,{placeholder:"Filter by subscription or contract number",value:N,onChange:function(e){return T(e)},onClear:function(){return T("")}})),i().createElement(r.FlexItem,{align:{default:"alignRight"}},(void 0===t&&(t=r.PaginationVariant.top),i().createElement(r.Pagination,{itemCount:n.length,perPage:s,page:u,onSetPage:function(e,t){c(t)},onPerPageSelect:function(e,t){m(t),c(1)},variant:t})))),i().createElement(E.TableComposable,{"aria-label":"subscriptions",variant:"compact"},i().createElement(E.Thead,null,i().createElement(E.Tr,null,i().createElement(E.Th,{sort:P(0),width:25},D),i().createElement(E.Th,{sort:P(1),width:20},I),i().createElement(E.Th,{sort:P(2),width:25},L),i().createElement(E.Th,{sort:P(3),width:15},F),i().createElement(E.Th,{sort:P(4),width:15},k))),i().createElement(E.Tbody,null,x.map((function(e,t){return i().createElement(i().Fragment,{key:t},i().createElement(E.Tr,null,i().createElement(E.Td,{dataLabel:D},-1==e.number?"Not Available":e.number),i().createElement(E.Td,{dataLabel:I},-1==e.contractNumber?"Not Available":e.contractNumber),i().createElement(E.Td,{dataLabel:L},-1==e.quantity?"Not Available":e.quantity),i().createElement(E.Td,{dataLabel:F},e.startDate==new Date(0)?"Not Available":h(e.startDate)),i().createElement(E.Td,{dataLabel:k},e.endDate==new Date(0)?"Not Available":h(e.endDate))))})))))};var S=n(6456);const N=(0,o.withRouter)((function(){var e,t,n,c=(0,o.useParams)().SKU,E=(0,m.useQueryClient)().getQueryData("user"),v=(n=c,(0,m.useQuery)("singleProduct.".concat(n),(function(){return function(e){return b(void 0,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,f(e)];case 1:return[2,t.sent()]}}))}))}(n)}))),h=v.isLoading,y=v.error,g=v.data,N=("subscriptionInventory.detailsTable",e=(0,S.useFlagsStatus)().flagsReady,t=(0,S.useFlag)("subscriptionInventory.detailsTable"),!!e&&t),T="Not Available";return E.canReadProducts?i().createElement((function(){var e;return i().createElement(i().Fragment,null,i().createElement(l.Z,null,h&&!y&&i().createElement(s.qb,null),!h&&!y&&i().createElement(i().Fragment,null,i().createElement(r.Breadcrumb,null,i().createElement(r.BreadcrumbItem,{render:function(){return i().createElement(o.Link,{to:"/"},"Subscription Inventory")}}),i().createElement(r.BreadcrumbItem,{isActive:!0},g.name," ")),i().createElement(u.Z,{title:g.name}),i().createElement(r.List,{isPlain:!0},i().createElement(r.ListItem,{className:"pf-u-mt-md"},i().createElement("b",null,"SKU: "),g.sku||T),i().createElement(r.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Quantity: "),null!==(e=g.quantity)&&void 0!==e?e:T),i().createElement(r.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Support level: "),g.serviceLevel||T),i().createElement(r.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Support type: "),g.serviceType||T),i().createElement(r.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Unit of Measure: "),g.unitOfMeasure?i().createElement(i().Fragment,null,g.unitOfMeasure.name," ",i().createElement(r.Badge,{isRead:!0},g.unitOfMeasure.quantity)):i().createElement(i().Fragment,null,"Not Available")))),y&&i().createElement(p.Z,null)),N&&i().createElement(a.Z,null,i().createElement(r.PageSection,{variant:"light"},i().createElement(r.Title,{headingLevel:"h2"},"Subscription details"),h&&!y&&i().createElement(s.qb,null),!h&&!y&&i().createElement(w,{subscriptions:null==g?void 0:g.subscriptions}),y&&i().createElement(p.Z,null))))}),null):i().createElement(o.Redirect,{to:"/no-permissions"})}))}}]);
//# sourceMappingURL=../sourcemaps/3028.ffed5879a72bf16c494cc491e55b5310.js.map