"use strict";(self.webpackChunksubscription_inventory=self.webpackChunksubscription_inventory||[]).push([[716],{2086:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var r=n(3666),a=n(4748),c=n(9376),o=n(9173),u=n(2950),l=n.n(u),i=n(2320),s=n(228),m=n(8767),f=n(237),p=function(e,t,n,r){return new(n||(n=Promise))((function(a,c){function o(e){try{l(r.next(e))}catch(e){c(e)}}function u(e){try{l(r.throw(e))}catch(e){c(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}l((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,a,c,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},b=n(5984),y=n(5913);const E=function(){var e=(0,i.useNavigate)();return l().createElement(r.EmptyState,{variant:r.EmptyStateVariant.large},l().createElement(r.EmptyStateIcon,{icon:y.R0,color:"grey"}),l().createElement(r.Title,{headingLevel:"h5",size:"lg"},"Your organization currently has no subscriptions for this product"),l().createElement(r.EmptyStateBody,null,"Return to your subscription inventory to view the products to which your organization is subscribed."),l().createElement(r.Button,{variant:"primary",onClick:function(){e("/")}},"Return to Subscription Inventory"))};var v=n(6642),h=n(6486),g=function(e){var t=e.getUTCMonth()+1,n=e.getUTCDate();return"".concat(e.getUTCFullYear(),"-").concat(t<10?"0".concat(t):t,"-").concat(n<10?"0".concat(n):n)},w=function(e){return""==e?-1:(0,h.parseInt)(e)},S=function(e){return""==e?new Date(0):new Date(e)};const T=function(e){var t,n=e.subscriptions,a=n.map((function(e){return{contractNumber:w(e.contractNumber),startDate:S(e.startDate),endDate:S(e.endDate),quantity:w(e.quantity)}})),c=l().useState(1),o=c[0],u=c[1],i=l().useState(10),m=i[0],f=i[1],p=l().useState(0),d=p[0],b=p[1],y=l().useState("asc"),E=y[0],h=y[1],T=l().useState(""),N=T[0],P=T[1],C="Contract number",D="Subscription quantity",I="Start date",k="End date",F=function(e){return{sortBy:{index:d,direction:E,defaultDirection:"asc"},onSort:function(e,t,n){b(t),h(n)},columnIndex:e}},L=function(e,t){var n=["contractNumber","quantity","startDate","endDate"];return e.sort((function(e,r){var a=0,c=e[n[t]],o=r[n[t]];return c<o?a=-1:c>o&&(a=1),"asc"==E?a:-1*a}))}(a,d),x=function(e,t){return t=t.trim(),e.filter((function(e){return(-1!=e.contractNumber?e.contractNumber.toString():"Not Available").includes(t)}))}(L,N),q=function(e){var t=(o-1)*m,n=t+m;return e.slice(t,n)}(x);return l().createElement(l().Fragment,null,l().createElement(r.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},l().createElement(r.FlexItem,null,a.length>0&&l().createElement(r.SearchInput,{placeholder:"Filter by contract number",value:N,onChange:function(e,t){return P(t)},onClear:function(){return P("")}})),l().createElement(r.FlexItem,{align:{default:"alignRight"}},(void 0===t&&(t=r.PaginationVariant.top),l().createElement(r.Pagination,{itemCount:n.length,perPage:m,page:o,onSetPage:function(e,t){u(t)},onPerPageSelect:function(e,t){f(t),u(1)},variant:t})))),l().createElement(v.TableComposable,{"aria-label":"subscriptions",variant:"compact"},l().createElement(v.Thead,null,l().createElement(v.Tr,null,l().createElement(v.Th,{sort:F(0),width:20},C),l().createElement(v.Th,{sort:F(1),width:25},D),l().createElement(v.Th,{sort:F(2),width:15},I),l().createElement(v.Th,{sort:F(3),width:15},k))),l().createElement(v.Tbody,null,q.map((function(e,t){return l().createElement(l().Fragment,{key:t},l().createElement(v.Tr,null,l().createElement(v.Td,{dataLabel:C},-1==e.contractNumber?"Not Available":e.contractNumber),l().createElement(v.Td,{dataLabel:D},-1==e.quantity?"Not Available":e.quantity),l().createElement(v.Td,{dataLabel:I},e.startDate==new Date(0)?"Not Available":g(e.startDate)),l().createElement(v.Td,{dataLabel:k},e.endDate==new Date(0)?"Not Available":g(e.endDate))))})))),0==q.length&&l().createElement(s.q,{clearFilters:function(){P("")}}))};var N=n(7085);const P=function(){var e,t,n,y=(0,i.useParams)().SKU,v=(0,m.useQueryClient)().getQueryData("user"),h=(e=y,(0,m.useQuery)({queryKey:"singleProduct.".concat(e),queryFn:function(){return function(e){return p(void 0,void 0,Promise,(function(){var t;return d(this,(function(n){return t=function(e){return p(void 0,void 0,Promise,(function(){var t,n;return d(this,(function(r){switch(r.label){case 0:return[4,window.insights.chrome.auth.getToken()];case 1:return t=r.sent(),[4,fetch("/api/rhsm/v2/products/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})];case 2:if(!(n=r.sent()).ok)throw new f.o("Status Code ".concat(n.status,".  Error fetching sku: ").concat(n.statusText,"."),n.status,n.statusText);return[4,n.json()];case 3:return[2,r.sent().body]}}))}))}(e),[2,t]}))}))}(e)},retry:function(e,t){return e<3&&404!=t.status}})),g=h.isLoading,w=h.error,S=h.data,P=("subscriptionInventory.detailsTable",t=(0,N.useFlagsStatus)().flagsReady,n=(0,N.useFlag)("subscriptionInventory.detailsTable"),!!t&&n),C="Not Available",D=(0,i.useNavigate)();return(0,u.useEffect)((function(){v.canReadProducts||D("/no-permissions")}),[v.canReadProducts]),l().createElement((function(){var e;return l().createElement(l().Fragment,null,l().createElement(c.Z,null,g&&!w&&l().createElement(s.$,null),!g&&!w&&l().createElement(l().Fragment,null,l().createElement(r.Breadcrumb,null,l().createElement(r.BreadcrumbItem,{render:function(){return l().createElement(i.Link,{to:"/"},"Subscription Inventory")}}),l().createElement(r.BreadcrumbItem,{isActive:!0},S.name," ")),l().createElement(o.Z,{title:S.name}),l().createElement(r.List,{isPlain:!0},l().createElement(r.ListItem,{className:"pf-u-mt-md"},l().createElement("b",null,"SKU: "),S.sku||C),l().createElement(r.ListItem,{className:"pf-u-mt-0"},l().createElement("b",null,"Quantity: "),null!==(e=S.quantity)&&void 0!==e?e:C),l().createElement(r.ListItem,{className:"pf-u-mt-0"},l().createElement("b",null,"Support level: "),S.serviceLevel||C),l().createElement(r.ListItem,{className:"pf-u-mt-0"},l().createElement("b",null,"Support type: "),S.serviceType||C),l().createElement(r.ListItem,{className:"pf-u-mt-0"},l().createElement("b",null,"Capacity: "),S.capacity?l().createElement(l().Fragment,null,S.capacity.name," ",l().createElement(r.Badge,{isRead:!0},S.capacity.quantity)):l().createElement(l().Fragment,null,"Not Available"))))),P&&!w&&l().createElement(a.ZP,null,l().createElement(r.PageSection,{variant:"light"},l().createElement(r.Title,{headingLevel:"h2"},"Subscription details"),g&&!w&&l().createElement(s.$,null),!g&&!w&&l().createElement(T,{subscriptions:null==S?void 0:S.subscriptions}))),w&&404==w.status&&l().createElement(E,null),w&&404!=w.status&&l().createElement(b.Z,null))}),null)}},237:(e,t,n)=>{n.d(t,{o:()=>c});var r,a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.status=n,a.statusText=r,a}return a(t,e),t}(Error)}}]);
//# sourceMappingURL=../sourcemaps/716.b1c7ede96797219691ac26545a0b8db0.js.map