(self.webpackChunksubscription_inventory=self.webpackChunksubscription_inventory||[]).push([[468],{78456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var r=n(71376),a=n(9708),c=n(55632),u=n(23132),l=n.n(u),o=n(50708),i=n(30416),s=n(43656),m=n(2996),f=n(95940),p=function(e){var t=(0,f.Md)();return(0,s.useQuery)({queryKey:"singleProduct.".concat(e),queryFn:function(){return function(e){return function(t){return n=void 0,r=void 0,c=function(){var n,r,a,c,u,l;return function(e,t){var n,r,a,c,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function l(l){return function(o){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,l[0]&&(u=0)),u;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return u.label++,{value:l[1],done:!1};case 5:u.label++,r=l[1],l=[0];continue;case 7:l=u.ops.pop(),u.trys.pop();continue;default:if(!((a=(a=u.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){u=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){u.label=l[1];break}if(6===l[0]&&u.label<a[1]){u.label=a[1],a=l;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(l);break}a[2]&&u.ops.pop(),u.trys.pop();continue}l=t.call(e,u)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,o])}}}(this,(function(o){switch(o.label){case 0:return r=fetch,a=["/api/rhsm/v2/products/".concat(t)],u={},l={},c="Bearer ".concat,[4,e];case 1:return[4,r.apply(void 0,a.concat([(u.headers=(l.Authorization=c.apply("Bearer ",[o.sent()]),l),u)]))];case 2:if(!(n=o.sent()).ok)throw new m.m("Status Code ".concat(n.status,".  Error fetching sku: ").concat(n.statusText,"."),n.status,n.statusText);return[4,n.json()];case 3:return[2,o.sent().body]}}))},new((a=Promise)||(a=Promise))((function(e,t){function u(e){try{o(c.next(e))}catch(e){t(e)}}function l(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(u,l)}o((c=c.apply(n,r||[])).next())}));var n,r,a,c}}(t)(e)},retry:function(e,t){return e<3&&404!=t.status}})},d=n(92240),y=n(74144);const b=function(){var e=(0,o.useNavigate)();return l().createElement(r.EmptyState,{variant:r.EmptyStateVariant.lg},l().createElement(r.EmptyStateHeader,{titleText:"Your organization currently has no subscriptions for this product",icon:l().createElement(r.EmptyStateIcon,{icon:y.iq,color:"grey"}),headingLevel:"h5"}),l().createElement(r.EmptyStateBody,null,"Return to your subscription inventory to view the products to which your organization is subscribed."),l().createElement(r.EmptyStateFooter,null,l().createElement(r.Button,{variant:"primary",onClick:function(){e("/")}},"Return to Subscriptions Inventory")))};var E=n(23848),v=n(33568),h=function(e){var t=e.getUTCMonth()+1,n=e.getUTCDate();return"".concat(e.getUTCFullYear(),"-").concat(t<10?"0".concat(t):t,"-").concat(n<10?"0".concat(n):n)},g=function(e){return""==e?-1:(0,v.parseInt)(e)},S=function(e){return""==e?new Date(0):new Date(e)};const w=function(e){var t,n=e.subscriptions,a=n.map((function(e){return{contractNumber:g(e.contractNumber),startDate:S(e.startDate),endDate:S(e.endDate),quantity:g(e.quantity)}})),c=l().useState(1),u=c[0],o=c[1],s=l().useState(10),m=s[0],f=s[1],p=l().useState(0),d=p[0],y=p[1],b=l().useState("asc"),v=b[0],w=b[1],T=l().useState(""),N=T[0],I=T[1],D="Contract number",C="Subscription quantity",F="Start date",P="End date",x=function(e){return{sortBy:{index:d,direction:v,defaultDirection:"asc"},onSort:function(e,t,n){y(t),w(n)},columnIndex:e}},L=function(e,t){var n=["contractNumber","quantity","startDate","endDate"];return e.sort((function(e,r){var a=0,c=e[n[t]],u=r[n[t]];return c<u?a=-1:c>u&&(a=1),"asc"==v?a:-1*a}))}(a,d),k=function(e,t){return t=t.trim(),e.filter((function(e){return(-1!=e.contractNumber?e.contractNumber.toString():"Not Available").includes(t)}))}(L,N),q=function(e){var t=(u-1)*m,n=t+m;return e.slice(t,n)}(k);return l().createElement(l().Fragment,null,l().createElement(r.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},l().createElement(r.FlexItem,null,a.length>0&&l().createElement(r.SearchInput,{placeholder:"Filter by contract number",value:N,onChange:function(e,t){return I(t)},onClear:function(){return I("")}})),l().createElement(r.FlexItem,{align:{default:"alignRight"}},(void 0===t&&(t=r.PaginationVariant.top),l().createElement(r.Pagination,{itemCount:n.length,perPage:m,page:u,onSetPage:function(e,t){o(t)},onPerPageSelect:function(e,t){f(t),o(1)},variant:t})))),l().createElement(E.Table,{"aria-label":"subscriptions",variant:"compact"},l().createElement(E.Thead,null,l().createElement(E.Tr,null,l().createElement(E.Th,{sort:x(0),width:20},D),l().createElement(E.Th,{sort:x(1),width:25},C),l().createElement(E.Th,{sort:x(2),width:15},F),l().createElement(E.Th,{sort:x(3),width:15},P))),l().createElement(E.Tbody,null,q.map((function(e,t){return l().createElement(l().Fragment,{key:t},l().createElement(E.Tr,null,l().createElement(E.Td,{dataLabel:D},-1==e.contractNumber?"Not Available":e.contractNumber),l().createElement(E.Td,{dataLabel:C},-1==e.quantity?"Not Available":e.quantity),l().createElement(E.Td,{dataLabel:F},e.startDate==new Date(0)?"Not Available":h(e.startDate)),l().createElement(E.Td,{dataLabel:P},e.endDate==new Date(0)?"Not Available":h(e.endDate))))})))),0==q.length&&l().createElement(i.s,{clearFilters:function(){I("")}}))};var T=n(57884),N=n(82184);const I=function(){var e,t,n=(0,o.useParams)().SKU,m=(0,s.useQueryClient)().getQueryData("user"),f=p(n),y=f.isLoading,E=f.error,v=f.data,h=("subscriptionInventory.detailsTable",e=(0,T.useFlagsStatus)().flagsReady,t=(0,T.useFlag)("subscriptionInventory.detailsTable"),!!e&&t),g="Not Available",S=(0,o.useNavigate)();return(0,u.useEffect)((function(){m.canReadProducts||S("/no-permissions")}),[m.canReadProducts]),l().createElement((function(){var e;return l().createElement(l().Fragment,null,l().createElement(a.c,null,y&&!E&&l().createElement(i.I,null),!y&&!E&&l().createElement(l().Fragment,null,l().createElement(r.Breadcrumb,null,l().createElement(r.BreadcrumbItem,{render:function(){return l().createElement(o.Link,{to:"../"},"Subscriptions Inventory")}}),l().createElement(r.BreadcrumbItem,{isActive:!0},v.name," ")),l().createElement(c.c,{title:v.name}),l().createElement(r.List,{isPlain:!0},l().createElement(r.ListItem,{className:"pf-v5-u-mt-md"},l().createElement("b",null,"SKU: "),v.sku||g),l().createElement(r.ListItem,{className:"pf-v5-u-mt-0"},l().createElement("b",null,"Quantity: "),null!==(e=v.quantity)&&void 0!==e?e:g),l().createElement(r.ListItem,{className:"pf-v5-u-mt-0"},l().createElement("b",null,"Support level: "),v.serviceLevel||g),l().createElement(r.ListItem,{className:"pf-v5-u-mt-0"},l().createElement("b",null,"Support type: "),v.serviceType||g),l().createElement(r.ListItem,{className:"pf-v5-u-mt-0"},l().createElement("b",null,"Capacity: "),v.capacity?l().createElement(l().Fragment,null,v.capacity.name," ",l().createElement(r.Badge,{isRead:!0},v.capacity.quantity)):l().createElement(l().Fragment,null,"Not Available"))))),h&&!E&&l().createElement(N.c,null,l().createElement(r.PageSection,{variant:"light"},l().createElement(r.Title,{headingLevel:"h2"},"Subscription details"),y&&!E&&l().createElement(i.I,null),!y&&!E&&l().createElement(w,{subscriptions:null==v?void 0:v.subscriptions}))),E&&404==E.status&&l().createElement(b,null),E&&404!=E.status&&l().createElement(d.c,null))}),null)}},2996:(e,t,n)=>{"use strict";n.d(t,{m:()=>c});var r,a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.status=n,a.statusText=r,a}return a(t,e),t}(Error)},3744:()=>{}}]);
//# sourceMappingURL=../sourcemaps/468.38c68f84b21e0e211f5b3d15927fc469.js.map