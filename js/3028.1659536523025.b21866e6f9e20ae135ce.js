"use strict";(self.webpackChunksubscription_inventory=self.webpackChunksubscription_inventory||[]).push([[3028],{7345:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var r=n(8071),a=n(4748),l=n(123),c=n(9173),u=n(2950),i=n.n(u),o=n(334),s=n(5586),m=n(8767),b=function(e,t,n,r){return new(n||(n=Promise))((function(a,l){function c(e){try{i(r.next(e))}catch(e){l(e)}}function u(e){try{i(r.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}i((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,a,l,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function u(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,r=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!((a=(a=c.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){c.label=l[1];break}if(6===l[0]&&c.label<a[1]){c.label=a[1],a=l;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(l);break}a[2]&&c.ops.pop(),c.trys.pop();continue}l=t.call(e,c)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},f=function(e){return b(void 0,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return[4,window.insights.chrome.auth.getToken()];case 1:return t=n.sent(),[4,fetch("/api/rhsm/v2/products/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})];case 2:return[4,n.sent().json()];case 3:return[2,n.sent().body]}}))}))},p=n(5984),E=n(3193),v=n(6486),h=function(e){var t=e.getUTCMonth()+1,n=e.getUTCDate();return"".concat(e.getUTCFullYear(),"-").concat(t<10?"0".concat(t):t,"-").concat(n<10?"0".concat(n):n)},y=function(e){return""==e?-1:(0,v.parseInt)(e)},g=function(e){return""==e?new Date(0):new Date(e)};const w=function(e){var t,n=e.subscriptions,a=n.map((function(e){return{number:y(e.number),contractNumber:y(e.contractNumber),startDate:g(e.startDate),endDate:g(e.endDate),quantity:y(e.quantity)}})),l=i().useState(1),c=l[0],u=l[1],o=i().useState(10),m=o[0],b=o[1],d=i().useState(0),f=d[0],p=d[1],v=i().useState("asc"),w=v[0],S=v[1],T=i().useState(""),N=T[0],D=T[1],I="Subscription number",L="Contract number",C="Subscription quantity",F="Start date",k="End date",P=function(e){return{sortBy:{index:f,direction:w,defaultDirection:"asc"},onSort:function(e,t,n){p(t),S(n)},columnIndex:e}},q=function(e,t){var n=["number","contractNumber","quantity","startDate","endDate"];return e.sort((function(e,r){var a=0,l=e[n[t]],c=r[n[t]];return l<c?a=-1:l>c&&(a=1),"asc"==w?a:-1*a}))}(a,f),x=function(e,t){return t=t.trim(),e.filter((function(e){var n=-1!=e.number?e.number.toString():"Not Available",r=-1!=e.contractNumber?e.contractNumber.toString():"Not Available";return n.includes(t)||r.includes(t)}))}(q,N),A=function(e){var t=(c-1)*m,n=t+m;return e.slice(t,n)}(x);return i().createElement(i().Fragment,null,i().createElement(r.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},i().createElement(r.FlexItem,null,a.length>0&&i().createElement(r.SearchInput,{placeholder:"Filter by subscription or contract number",value:N,onChange:function(e){return D(e)},onClear:function(){return D("")}})),i().createElement(r.FlexItem,{align:{default:"alignRight"}},(void 0===t&&(t=r.PaginationVariant.top),i().createElement(r.Pagination,{itemCount:n.length,perPage:m,page:c,onSetPage:function(e,t){u(t)},onPerPageSelect:function(e,t){b(t),u(1)},variant:t})))),i().createElement(E.TableComposable,{"aria-label":"subscriptions",variant:"compact"},i().createElement(E.Thead,null,i().createElement(E.Tr,null,i().createElement(E.Th,{sort:P(0),width:25},I),i().createElement(E.Th,{sort:P(1),width:20},L),i().createElement(E.Th,{sort:P(2),width:25},C),i().createElement(E.Th,{sort:P(3),width:15},F),i().createElement(E.Th,{sort:P(4),width:15},k))),i().createElement(E.Tbody,null,A.map((function(e,t){return i().createElement(i().Fragment,{key:t},i().createElement(E.Tr,null,i().createElement(E.Td,{dataLabel:I},-1==e.number?"Not Available":e.number),i().createElement(E.Td,{dataLabel:L},-1==e.contractNumber?"Not Available":e.contractNumber),i().createElement(E.Td,{dataLabel:C},-1==e.quantity?"Not Available":e.quantity),i().createElement(E.Td,{dataLabel:F},e.startDate==new Date(0)?"Not Available":h(e.startDate)),i().createElement(E.Td,{dataLabel:k},e.endDate==new Date(0)?"Not Available":h(e.endDate))))})))),0==A.length&&i().createElement(s.qx,{clearFilters:function(){D("")}}))};var S=n(6456);const T=(0,o.withRouter)((function(){var e,t,n,u=(0,o.useParams)().SKU,E=(0,m.useQueryClient)().getQueryData("user"),v=(n=u,(0,m.useQuery)("singleProduct.".concat(n),(function(){return function(e){return b(void 0,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,f(e)];case 1:return[2,t.sent()]}}))}))}(n)}))),h=v.isLoading,y=v.error,g=v.data,T=("subscriptionInventory.detailsTable",e=(0,S.useFlagsStatus)().flagsReady,t=(0,S.useFlag)("subscriptionInventory.detailsTable"),!!e&&t),N="Not Available";return E.canReadProducts?i().createElement((function(){var e;return i().createElement(i().Fragment,null,i().createElement(l.Z,null,h&&!y&&i().createElement(s.qb,null),!h&&!y&&i().createElement(i().Fragment,null,i().createElement(r.Breadcrumb,null,i().createElement(r.BreadcrumbItem,{render:function(){return i().createElement(o.Link,{to:"/"},"Subscription Inventory")}}),i().createElement(r.BreadcrumbItem,{isActive:!0},g.name," ")),i().createElement(c.Z,{title:g.name}),i().createElement(r.List,{isPlain:!0},i().createElement(r.ListItem,{className:"pf-u-mt-md"},i().createElement("b",null,"SKU: "),g.sku||N),i().createElement(r.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Quantity: "),null!==(e=g.quantity)&&void 0!==e?e:N),i().createElement(r.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Support level: "),g.serviceLevel||N),i().createElement(r.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Support type: "),g.serviceType||N),i().createElement(r.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Capacity: "),g.unitOfMeasure?i().createElement(i().Fragment,null,g.unitOfMeasure.name," ",i().createElement(r.Badge,{isRead:!0},g.unitOfMeasure.quantity)):i().createElement(i().Fragment,null,"Not Available")))),y&&i().createElement(p.Z,null)),T&&i().createElement(a.Z,null,i().createElement(r.PageSection,{variant:"light"},i().createElement(r.Title,{headingLevel:"h2"},"Subscription details"),h&&!y&&i().createElement(s.qb,null),!h&&!y&&i().createElement(w,{subscriptions:null==g?void 0:g.subscriptions}),y&&i().createElement(p.Z,null))))}),null):i().createElement(o.Redirect,{to:"/no-permissions"})}))}}]);
//# sourceMappingURL=../sourcemaps/3028.e1419dab94314ebfcaddd240c6dc8b4a.js.map