"use strict";(self.webpackChunksubscription_inventory=self.webpackChunksubscription_inventory||[]).push([[894],{2965:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r,a=n(8071),c=n(4748),u=n(123),o=n(9173),l=n(2950),i=n.n(l),s=n(334),m=n(228),f=n(8767),p=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.status=n,a.statusText=r,a}return p(t,e),t}(Error),d=function(e,t,n,r){return new(n||(n=Promise))((function(a,c){function u(e){try{l(r.next(e))}catch(e){c(e)}}function o(e){try{l(r.throw(e))}catch(e){c(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,o)}l((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,a,c,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function o(c){return function(o){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,r=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!((a=(a=u.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){u=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){u.label=c[1];break}if(6===c[0]&&u.label<a[1]){u.label=a[1],a=c;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(c);break}a[2]&&u.ops.pop(),u.trys.pop();continue}c=t.call(e,u)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,o])}}},E=n(5984),h=n(5913);const v=function(){var e=(0,s.useHistory)();return i().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large},i().createElement(a.EmptyStateIcon,{icon:h.R0,color:"grey"}),i().createElement(a.Title,{headingLevel:"h5",size:"lg"},"Your organization currently has no subscriptions for this product"),i().createElement(a.EmptyStateBody,null,"Return to your subscription inventory to view the products to which your organization is subscribed."),i().createElement(a.Button,{variant:"primary",onClick:function(){e.push("/")}},"Return to Subscription Inventory"))};var g=n(3193),w=n(6486),S=function(e){var t=e.getUTCMonth()+1,n=e.getUTCDate();return"".concat(e.getUTCFullYear(),"-").concat(t<10?"0".concat(t):t,"-").concat(n<10?"0".concat(n):n)},T=function(e){return""==e?-1:(0,w.parseInt)(e)},N=function(e){return""==e?new Date(0):new Date(e)};const C=function(e){var t,n=e.subscriptions,r=n.map((function(e){return{number:T(e.number),contractNumber:T(e.contractNumber),startDate:N(e.startDate),endDate:N(e.endDate),quantity:T(e.quantity)}})),c=i().useState(1),u=c[0],o=c[1],l=i().useState(10),s=l[0],f=l[1],p=i().useState(0),b=p[0],d=p[1],y=i().useState("asc"),E=y[0],h=y[1],v=i().useState(""),w=v[0],C=v[1],D="Subscription number",I="Contract number",L="Subscription quantity",P="Start date",k="End date",F=function(e){return{sortBy:{index:b,direction:E,defaultDirection:"asc"},onSort:function(e,t,n){d(t),h(n)},columnIndex:e}},x=function(e,t){var n=["number","contractNumber","quantity","startDate","endDate"];return e.sort((function(e,r){var a=0,c=e[n[t]],u=r[n[t]];return c<u?a=-1:c>u&&(a=1),"asc"==E?a:-1*a}))}(r,b),A=function(e,t){return t=t.trim(),e.filter((function(e){var n=-1!=e.number?e.number.toString():"Not Available",r=-1!=e.contractNumber?e.contractNumber.toString():"Not Available";return n.includes(t)||r.includes(t)}))}(x,w),q=function(e){var t=(u-1)*s,n=t+s;return e.slice(t,n)}(A);return i().createElement(i().Fragment,null,i().createElement(a.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},i().createElement(a.FlexItem,null,r.length>0&&i().createElement(a.SearchInput,{placeholder:"Filter by subscription or contract number",value:w,onChange:function(e){return C(e)},onClear:function(){return C("")}})),i().createElement(a.FlexItem,{align:{default:"alignRight"}},(void 0===t&&(t=a.PaginationVariant.top),i().createElement(a.Pagination,{itemCount:n.length,perPage:s,page:u,onSetPage:function(e,t){o(t)},onPerPageSelect:function(e,t){f(t),o(1)},variant:t})))),i().createElement(g.TableComposable,{"aria-label":"subscriptions",variant:"compact"},i().createElement(g.Thead,null,i().createElement(g.Tr,null,i().createElement(g.Th,{sort:F(0),width:25},D),i().createElement(g.Th,{sort:F(1),width:20},I),i().createElement(g.Th,{sort:F(2),width:25},L),i().createElement(g.Th,{sort:F(3),width:15},P),i().createElement(g.Th,{sort:F(4),width:15},k))),i().createElement(g.Tbody,null,q.map((function(e,t){return i().createElement(i().Fragment,{key:t},i().createElement(g.Tr,null,i().createElement(g.Td,{dataLabel:D},-1==e.number?"Not Available":e.number),i().createElement(g.Td,{dataLabel:I},-1==e.contractNumber?"Not Available":e.contractNumber),i().createElement(g.Td,{dataLabel:L},-1==e.quantity?"Not Available":e.quantity),i().createElement(g.Td,{dataLabel:P},e.startDate==new Date(0)?"Not Available":S(e.startDate)),i().createElement(g.Td,{dataLabel:k},e.endDate==new Date(0)?"Not Available":S(e.endDate))))})))),0==q.length&&i().createElement(m.q,{clearFilters:function(){C("")}}))};var D=n(6456);const I=(0,s.withRouter)((function(){var e,t,n,r=(0,s.useParams)().SKU,l=(0,f.useQueryClient)().getQueryData("user"),p=(e=r,(0,f.useQuery)({queryKey:"singleProduct.".concat(e),queryFn:function(){return function(e){return d(void 0,void 0,Promise,(function(){var t;return y(this,(function(n){return t=function(e){return d(void 0,void 0,Promise,(function(){var t,n;return y(this,(function(r){switch(r.label){case 0:return[4,window.insights.chrome.auth.getToken()];case 1:return t=r.sent(),[4,fetch("/api/rhsm/v2/products/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})];case 2:if(!(n=r.sent()).ok)throw new b("Status Code ".concat(n.status,".  Error fetching sku: ").concat(n.statusText,"."),n.status,n.statusText);return[4,n.json()];case 3:return[2,r.sent().body]}}))}))}(e),[2,t]}))}))}(e)},retry:function(e,t){return e<3&&404!=t.status}})),h=p.isLoading,g=p.error,w=p.data,S=("subscriptionInventory.detailsTable",t=(0,D.useFlagsStatus)().flagsReady,n=(0,D.useFlag)("subscriptionInventory.detailsTable"),!!t&&n),T="Not Available";return l.canReadProducts?i().createElement((function(){var e;return i().createElement(i().Fragment,null,i().createElement(u.Z,null,h&&!g&&i().createElement(m.$,null),!h&&!g&&i().createElement(i().Fragment,null,i().createElement(a.Breadcrumb,null,i().createElement(a.BreadcrumbItem,{render:function(){return i().createElement(s.Link,{to:"/"},"Subscription Inventory")}}),i().createElement(a.BreadcrumbItem,{isActive:!0},w.name," ")),i().createElement(o.Z,{title:w.name}),i().createElement(a.List,{isPlain:!0},i().createElement(a.ListItem,{className:"pf-u-mt-md"},i().createElement("b",null,"SKU: "),w.sku||T),i().createElement(a.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Quantity: "),null!==(e=w.quantity)&&void 0!==e?e:T),i().createElement(a.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Support level: "),w.serviceLevel||T),i().createElement(a.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Support type: "),w.serviceType||T),i().createElement(a.ListItem,{className:"pf-u-mt-0"},i().createElement("b",null,"Capacity: "),w.capacity?i().createElement(i().Fragment,null,w.capacity.name," ",i().createElement(a.Badge,{isRead:!0},w.capacity.quantity)):i().createElement(i().Fragment,null,"Not Available"))))),S&&!g&&i().createElement(c.Z,null,i().createElement(a.PageSection,{variant:"light"},i().createElement(a.Title,{headingLevel:"h2"},"Subscription details"),h&&!g&&i().createElement(m.$,null),!h&&!g&&i().createElement(C,{subscriptions:null==w?void 0:w.subscriptions}))),g&&404==g.status&&i().createElement(v,null),g&&404!=g.status&&i().createElement(E.Z,null))}),null):i().createElement(s.Redirect,{to:"/no-permissions"})}))}}]);
//# sourceMappingURL=../sourcemaps/894.js.map